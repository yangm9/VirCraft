export PATH="/data_backup/software/miniconda3/bin/conda:$PATH"
conda activate VirCraft
virsorter run --keep-original-seq -i /home/yangming/VirCraft/examples/result/01.assembly/cariaco/scaffolds.filt.gt5000.fasta -d  /data_backup/database/virsorter2DB/db-vs2 -v /home/yangming/VirCraft/examples/result/02.identify/cariaco/vs2-pass1 --include-groups dsDNAphage,ssDNA --min-length 0 --min-score 0.5 -j 28 all
checkv end_to_end /home/yangming/VirCraft/examples/result/02.identify/cariaco/vs2-pass1/final-viral-combined.fa /home/yangming/VirCraft/examples/result/02.identify/cariaco/checkv -d /data_backup/database/checkvDB/checkv-db-v1.2 -t 32 cat /home/yangming/VirCraft/examples/result/02.identify/cariaco/checkv/proviruses.fna /home/yangming/VirCraft/examples/result/02.identify/cariaco/checkv/viruses.fna /home/yangming/VirCraft/examples/result/02.identify/cariaco/checkv/combined.fna 
virsorter run --seqname-suffix-off --viral-gene-enrich-off --provirus-off --prep-for-dramv -i /home/yangming/VirCraft/examples/result/02.identify/cariaco/checkv/combined.fna -w /home/yangming/VirCraft/examples/result/02.identify/cariaco/vs2-pass2 --include-groups dsDNAphage,ssDNA --min-length 5000 --min-score 0.5 -j 28 all
DRAM-v.py annotate -i /home/yangming/VirCraft/examples/result/02.identify/cariaco/vs2-pass2/for-dramv/final-viral-combined-for-dramv.fa -v /home/yangming/VirCraft/examples/result/02.identify/cariaco/vs2-pass2/for-dramv/viral-affi-contigs-for-dramv.tab -o /home/yangming/VirCraft/examples/result/02.identify/cariaco/dramv-annotate --skip_trnascan --threads 28 --min_contig_size 1000
DRAM-v.py distill -i /home/yangming/VirCraft/examples/result/02.identify/cariaco/dramv-annotate/annotations.tsv -o /home/yangming/VirCraft/examples/result/02.identify/cariaco/dramv-distill 
sed '1s/seqname/contig_id/' /home/yangming/VirCraft/examples/result/02.identify/cariaco/vs2-pass2/final-viral-score.tsv > /home/yangming/VirCraft/examples/result/02.identify/cariaco/curation/final-viral-score.tsv 
linkTab.py /home/yangming/VirCraft/examples/result/02.identify/cariaco/curation/final-viral-score.tsv /home/yangming/VirCraft/examples/result/02.identify/cariaco/checkv/contamination.tsv left contig_id /home/yangming/VirCraft/examples/result/02.identify/cariaco/curation/curation_vs2_checkv.tsv 
vCurator.py /home/yangming/VirCraft/examples/result/02.identify/cariaco 
sed 's/_1 / /' /home/yangming/VirCraft/examples/result/02.identify/cariaco/checkv/combined.fna > /home/yangming/VirCraft/examples/result/02.identify/cariaco/checkv/combined_modi.fna 
extrSeqByName.pl /home/yangming/VirCraft/examples/result/02.identify/cariaco/curation/contigs_id.list /home/yangming/VirCraft/examples/result/02.identify/cariaco/checkv/combined_modi.fna {curation_dir}/virus_positive.fna 
